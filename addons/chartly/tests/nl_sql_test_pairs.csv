Query;Models;SQL
List all customer invoices created this month;account.move;SELECT * FROM account_move WHERE move_type='out_invoice' AND DATE_TRUNC('month', invoice_date)=DATE_TRUNC('month', CURRENT_DATE);
Show all vendor bills for the current year;account.move;SELECT * FROM account_move WHERE move_type='in_invoice' AND DATE_PART('year', invoice_date)=DATE_PART('year', CURRENT_DATE);
Get invoices that are not posted yet;account.move;SELECT * FROM account_move WHERE state!='posted';
Find all posted invoices with total amount above 10,000;account.move;SELECT * FROM account_move WHERE state='posted' AND amount_total>10000;
Show unpaid invoices;account.move;SELECT * FROM account_move WHERE payment_state NOT IN ('paid','in_payment');
Show fully paid invoices;account.move;SELECT * FROM account_move WHERE payment_state='paid';
List invoices due today;account.move;SELECT * FROM account_move WHERE invoice_date_due=CURRENT_DATE;
List overdue invoices;account.move;SELECT * FROM account_move WHERE invoice_date_due < CURRENT_DATE AND payment_state NOT IN ('paid');
Get all invoices for partner ID 5;account.move,res.partner;SELECT * FROM account_move WHERE partner_id=5;
Get all invoices for partner 'ABC Corp';account.move,res.partner;SELECT am.* FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id WHERE rp.name='ABC Corp';
Count all posted customer invoices;account.move;SELECT COUNT(*) FROM account_move WHERE move_type='out_invoice' AND state='posted';
List invoices created by user ID 3;account.move,res.users;SELECT * FROM account_move WHERE create_uid=3;
Get invoices modified in the last 7 days;account.move;SELECT * FROM account_move WHERE write_date >= CURRENT_DATE - INTERVAL '7 days';
Total sales invoiced this month;account.move;SELECT SUM(amount_total) FROM account_move WHERE move_type='out_invoice' AND state='posted' AND DATE_TRUNC('month', invoice_date)=DATE_TRUNC('month', CURRENT_DATE);
List draft bills;account.move;SELECT * FROM account_move WHERE move_type='in_invoice' AND state='draft';
Get invoice lines for invoice ID 10;account.move.line;SELECT * FROM account_move_line WHERE move_id=10;
Show accounts used in invoice 20;account.move.line,account.account;SELECT aml.account_id FROM account_move_line aml WHERE aml.move_id=20;
List products sold on invoice 15;account.move.line,product.product;SELECT pp.name FROM account_move_line aml JOIN product_product pp ON aml.product_id=pp.id WHERE aml.move_id=15;
Show tax amounts for invoice 18;account.tax.line;SELECT * FROM account_tax_line WHERE move_id=18;
List customers with unpaid invoices;account.move,res.partner;SELECT DISTINCT rp.name FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id WHERE am.payment_state!='paid';
Show top 10 customers by invoiced amount;account.move,res.partner;SELECT rp.name, SUM(amount_total) AS total FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id WHERE move_type='out_invoice' AND state='posted' GROUP BY rp.name ORDER BY total DESC LIMIT 10;
Total unpaid amount per customer;account.move,res.partner;SELECT rp.name, SUM(am.amount_total - am.amount_residual) AS amount_paid, SUM(am.amount_residual) AS unpaid FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id GROUP BY rp.name;
Total tax collected this year;account.tax.line;SELECT SUM(amount) FROM account_tax_line WHERE DATE_PART('year', date)=DATE_PART('year', CURRENT_DATE);
List invoices with more than 5 lines;account.move.line,account.move;SELECT move_id, COUNT(*) FROM account_move_line GROUP BY move_id HAVING COUNT(*)>5;
Show invoices containing product ID 12;account.move.line;SELECT DISTINCT move_id FROM account_move_line WHERE product_id=12;
Show number of invoices per month this year;account.move;SELECT DATE_TRUNC('month', invoice_date) AS month, COUNT(*) FROM account_move WHERE DATE_PART('year', invoice_date)=DATE_PART('year', CURRENT_DATE) GROUP BY month ORDER BY month;
List analytic accounts used in invoice lines this month;account.move.line,account.analytic.account;SELECT DISTINCT analytic_account_id FROM account_move_line WHERE analytic_account_id IS NOT NULL AND DATE_TRUNC('month', date)=DATE_TRUNC('month', CURRENT_DATE);
Show average invoice amount for customers;account.move;SELECT AVG(amount_total) FROM account_move WHERE move_type='out_invoice';
Get bills that have tax lines;account.move,account.tax.line;SELECT DISTINCT am.id FROM account_move am JOIN account_tax_line atl ON am.id=atl.move_id WHERE am.move_type='in_invoice';
List payments related to invoice ID 40;account.payment;SELECT * FROM account_payment WHERE id IN (SELECT payment_id FROM account_payment_invoice_rel WHERE invoice_id=40);
Get payment entries this week;account.payment;SELECT * FROM account_payment WHERE DATE_TRUNC('week', date)=DATE_TRUNC('week', CURRENT_DATE);
List invoices grouped by payment state;account.move;SELECT payment_state, COUNT(*) FROM account_move GROUP BY payment_state;
Show invoice totals by journal;account.move,account.journal;SELECT journal_id, SUM(amount_total) FROM account_move GROUP BY journal_id;
List journals used for sales invoices;account.move,account.journal;SELECT DISTINCT journal_id FROM account_move WHERE move_type='out_invoice';
List vendor bills by vendor name;account.move,res.partner;SELECT rp.name, am.* FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id WHERE move_type='in_invoice';
Top suppliers by billed amount;account.move,res.partner;SELECT rp.name, SUM(amount_total) FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id WHERE move_type='in_invoice' GROUP BY rp.name ORDER BY SUM(amount_total) DESC LIMIT 10;
Show invoices with discounts applied;account.move.line;SELECT * FROM account_move_line WHERE discount>0;
List analytic tags used in invoices;account.move.line,account.analytic.tag;SELECT DISTINCT tag_id FROM account_analytic_tag_account_move_line_rel;
List reconciliation entries for partner ID 4;account.full.reconcile,account.move.line;SELECT * FROM account_full_reconcile WHERE id IN (SELECT full_reconcile_id FROM account_move_line WHERE partner_id=4);
Show all reconciled payments;account.payment;SELECT * FROM account_payment WHERE state='posted' AND is_reconciled=TRUE;
List credit notes this month;account.move;SELECT * FROM account_move WHERE move_type='out_refund' AND DATE_TRUNC('month', invoice_date)=DATE_TRUNC('month', CURRENT_DATE);
Get debit notes this month;account.move;SELECT * FROM account_move WHERE move_type='in_refund' AND DATE_TRUNC('month', invoice_date)=DATE_TRUNC('month', CURRENT_DATE);
Show invoice lines with negative quantities;account.move.line;SELECT * FROM account_move_line WHERE quantity<0;
List taxes applied on product ID 8;account.move.line,account.tax;SELECT DISTINCT tax_line_id FROM account_move_line WHERE product_id=8;
Find invoices costing more than their residual;account.move;SELECT * FROM account_move WHERE amount_total > amount_residual;
Get bills awaiting payment;account.move;SELECT * FROM account_move WHERE move_type='in_invoice' AND payment_state NOT IN ('paid');
Show sales grouped by customer country;account.move,res.partner,res.country;SELECT c.name, SUM(am.amount_total) FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id JOIN res_country c ON rp.country_id=c.id WHERE am.move_type='out_invoice' GROUP BY c.name;
Show invoices linked to analytic account 3;account.move,account.move.line,account.analytic.account;SELECT am.* FROM account_move am JOIN account_move_line aml ON am.id=aml.move_id WHERE aml.analytic_account_id=3;
Total sales for product ID 11;account.move.line,product.product;SELECT SUM(price_subtotal) FROM account_move_line WHERE product_id=11;
List invoices with zero tax;account.move;SELECT * FROM account_move WHERE amount_tax=0;
Show invoices with currency different from company currency;account.move,res.currency,res.company;SELECT * FROM account_move WHERE currency_id != company_currency_id;
Count invoices per salesperson;account.move,res.users;SELECT invoice_user_id AS salesperson, COUNT(*) FROM account_move GROUP BY invoice_user_id;
Show customers without invoices;res.partner,account.move;SELECT * FROM res_partner WHERE id NOT IN (SELECT partner_id FROM account_move);
List draft customer credit notes;account.move;SELECT * FROM account_move WHERE move_type='out_refund' AND state='draft';
Show tax breakdown for invoice ID 100;account.tax.line;SELECT * FROM account_tax_line WHERE move_id=100;
Show invoices with analytic distribution;account.move.line,account.analytic.distribution;SELECT DISTINCT move_id FROM account_analytic_distribution_account_move_line_rel;
Show total billed per product;account.move.line,product.product;SELECT product_id, SUM(price_subtotal) FROM account_move_line GROUP BY product_id;
Invoices with early payment discounts applied;account.move,account.payment.term;SELECT * FROM account_move WHERE invoice_payment_term_id IS NOT NULL AND invoice_payment_term_id IN (SELECT id FROM account_payment_term WHERE note ILIKE '%discount%');
List invoices that have been partially paid;account.move;SELECT * FROM account_move WHERE payment_state='in_payment';
Show invoices with write-offs;account.move,account.move.line;SELECT DISTINCT am.id FROM account_move am JOIN account_move_line aml ON am.id=aml.move_id WHERE aml.full_reconcile_id IS NOT NULL;
Get all invoice attachments;ir.attachment,account.move;SELECT * FROM ir_attachment WHERE res_model='account.move';
List invoices created between two dates;account.move;SELECT * FROM account_move WHERE invoice_date BETWEEN '2024-01-01' AND '2024-01-31';
List recurring invoices;account.move;SELECT * FROM account_move WHERE auto_post=TRUE;
List invoices with missing partner;account.move;SELECT * FROM account_move WHERE partner_id IS NULL;
Show all refund invoices for customer ID 9;account.move,res.partner;SELECT * FROM account_move WHERE move_type='out_refund' AND partner_id=9;
List supplier credit notes;account.move;SELECT * FROM account_move WHERE move_type='in_refund';
Show total billed per account;account.move.line,account.account;SELECT account_id, SUM(debit - credit) FROM account_move_line GROUP BY account_id;
List invoices by journal name;account.move,account.journal;SELECT am.* FROM account_move am JOIN account_journal aj ON am.journal_id=aj.id ORDER BY aj.name;
Show invoices with attachments;account.move,ir.attachment;SELECT am.* FROM account_move am WHERE id IN (SELECT res_id FROM ir_attachment WHERE res_model='account.move');
Count of invoices by type;account.move;SELECT move_type, COUNT(*) FROM account_move GROUP BY move_type;
Show posted bills over 50,000;account.move;SELECT * FROM account_move WHERE move_type='in_invoice' AND state='posted' AND amount_total>50000;
Top 5 products by sales revenue;account.move.line,product.product;SELECT product_id, SUM(price_subtotal) FROM account_move_line GROUP BY product_id ORDER BY SUM(price_subtotal) DESC LIMIT 5;
Show vendors with more than 20 bills;account.move,res.partner;SELECT rp.name, COUNT(*) FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id WHERE am.move_type='in_invoice' GROUP BY rp.name HAVING COUNT(*)>20;
List invoices from a specific journal 'Sales';account.move,account.journal;SELECT am.* FROM account_move am JOIN account_journal aj ON am.journal_id=aj.id WHERE aj.name='Sales';
Show revenue per salesperson;account.move,res.users;SELECT invoice_user_id, SUM(amount_total) FROM account_move WHERE move_type='out_invoice' GROUP BY invoice_user_id;
List payments for partner ID 7;account.payment;SELECT * FROM account_payment WHERE partner_id=7;
List invoices with manual currency rate;account.move;SELECT * FROM account_move WHERE manual_currency_rate=TRUE;
Show analytic accounts with the highest revenue;account.move.line,account.analytic.account;SELECT analytic_account_id, SUM(price_subtotal) FROM account_move_line GROUP BY analytic_account_id ORDER BY SUM(price_subtotal) DESC;
Show invoices with no lines;account.move,account.move.line;SELECT * FROM account_move WHERE id NOT IN (SELECT move_id FROM account_move_line);
Check how many products appear in invoices;account.move.line,product.product;SELECT COUNT(DISTINCT product_id) FROM account_move_line WHERE product_id IS NOT NULL;
List multi-currency invoices;account.move,res.currency,res.company;SELECT * FROM account_move WHERE currency_id != company_currency_id;
Show invoices using payment term 'Immediate Payment';account.move,account.payment.term;SELECT am.* FROM account_move am JOIN account_payment_term pt ON am.invoice_payment_term_id=pt.id WHERE pt.name='Immediate Payment';
Show tax groups used in invoices;account.tax.line,account.tax.group;SELECT DISTINCT tax_group_id FROM account_tax_line;
List invoices by company;account.move,res.company;SELECT company_id, COUNT(*) FROM account_move GROUP BY company_id;
Revenue per country;account.move,res.partner,res.country;SELECT c.name, SUM(am.amount_total) FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id JOIN res_country c ON rp.country_id=c.id WHERE am.move_type='out_invoice' GROUP BY c.name;
List invoices with duplicated references;account.move;SELECT ref, COUNT(*) FROM account_move GROUP BY ref HAVING COUNT(*)>1;
Show invoices created by users and count;account.move,res.users;SELECT create_uid, COUNT(*) FROM account_move GROUP BY create_uid;
Find invoices linked to project analytic accounts;account.move,account.move.line,project.project;SELECT am.* FROM account_move am JOIN account_move_line aml ON am.id=aml.move_id JOIN project_project pp ON aml.analytic_account_id=pp.analytic_account_id;
Show all payment references;account.payment;SELECT ref FROM account_payment;
List invoices that include more than one tax;account.tax.line,account.move;SELECT move_id FROM account_tax_line GROUP BY move_id HAVING COUNT(*) > 1;
Show customers who have only paid partially;account.move,res.partner;SELECT DISTINCT rp.name FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id WHERE am.payment_state='in_payment';
Get the highest invoice amount ever created;account.move;SELECT MAX(amount_total) FROM account_move;
Show the oldest unpaid invoice;account.move;SELECT * FROM account_move WHERE payment_state!='paid' ORDER BY invoice_date ASC LIMIT 1;
List invoices with negative totals;account.move;SELECT * FROM account_move WHERE amount_total < 0;
Show payment methods used for customer payments;account.payment,account.payment.method;SELECT DISTINCT payment_method_id FROM account_payment WHERE partner_type='customer';
List journals that have never been used in any invoice;account.journal,account.move;SELECT * FROM account_journal WHERE id NOT IN (SELECT journal_id FROM account_move);
Show products that were never invoiced;product.product,account.move.line;SELECT * FROM product_product WHERE id NOT IN (SELECT DISTINCT product_id FROM account_move_line);
Find customers who paid late at least once;account.move,res.partner;SELECT DISTINCT rp.name FROM account_move am JOIN res_partner rp ON am.partner_id=rp.id WHERE am.invoice_date_due < am.invoice_date;
Show invoices canceled this year;account.move;SELECT * FROM account_move WHERE state='cancel' AND DATE_PART('year', invoice_date)=DATE_PART('year', CURRENT_DATE);

